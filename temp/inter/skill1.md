> 熟练掌握 Next.js，熟悉 C 端项目：相应式，国际化，性能优化，SEO，SSR/SSG/ISR 渲染

## 自我介绍？

- 面试官你好，我叫 xxx，4 年前端开发经验
- 目前在 xx 官网研发部负责集团官网，xx 社区，xx 商城，h5 营销活动的开发和维护
- 我的技术栈主要是 React 和 服务端渲染框架 Next，也了解 Vue
- 然后业务上，熟悉 C 端项目服务端渲染，熟悉 Web 动画开发，编辑器开发，了解 3D 模型渲染

## 说一下 nextjs？

我认为 Nextjs 框架主要是带来更好的开发体验，也提高页面的性能

#### 开发体验

- 开箱即用的全栈框架
- 文件路由，约定式文件，中间件，fetch 请求，优化组件，样式 等

#### 性能方面

- 服务端渲染首屏显示更快
- SEO
- 缓存机制
- image link script 等优化的内置组件

## 说一下相应式方案？

#### 对 h5 来说是自适应布局

- 可以用插件 postcss-px-to-viewport
- 可以写个函数监听屏幕尺寸变化修改 html 的 px 值，配合 rem，核心是比例关系：屏幕宽度/373 = 原本字体/需要的字体
- 调整蓝湖设计稿尺寸为 1000，也是比例关系，这样最方便

#### 对 PC 来说是相应式布局

- tailwind 实现最方便，本质上也是媒体查询，核心是先小尺寸再大尺寸，极大提高相应式布局开发效率

## 说一下国际化怎么做的？

首先有一些第三方的方案，如 next-intl，next-international，next-1i8n-router，我们用的是官网的例子

#### 集团官网的国际化方案

pages router 里内置了 i18n 配置，再通过 getStaticProps 中的 context.local 去 CMS 获取对应语言， 支持 SSG 的国际化

#### app router 下的国际化方案

用动态路由和中间件实现的，然后用默认的静态渲染 SSG，让国际化性能最优，然后语言也可以用 CMS 或者数据字典匹配

## 说一下做了哪些性能优化？

性能优化首先应该定位性能瓶颈，如何考虑网络层，渲染层，构建层这三个层次上的优化

#### 网络层

- 升级 http2.0
- 强缓存和协商缓存
- 预加载
- 对于首屏图片设置高优先级
- 图片 avif 和 webp 格式

#### 渲染层

- SSR 渲染
- 流式渲染
- 懒加载

#### 构建层

- turbopack 提高开发环境速度

## 是一下做了哪些 SEO？

- robots
- sitemap
- canonical
- meta 标签
- 站点收录
- json-ld
- opengraph image 和 twitter image

## 说一下 SSR/SSG/ISR 的区别？

SSR 服务端渲染，客户端注水后才能触发交互，利于 FP
SSG 是 SSR 的升级版，也就是默认的静态渲染，优势是只需要打包一次
ISG 是 SSG 的升级版，支持 SSG 功能的时候也能使得页面更新

## 如何解决服务端渲染客户端渲染数据不一致问题(水合不一致)？

- 不一致的地方可以都放到客户端 useEffect 渲染
- 可以用 next/dynamic 动态加载组件

## 服务端渲染的原理？

依赖于 React 的 renderToString 和 hydrateRoot 两个 API，页面的请求先经过服务端，服务端打包代码，打包后的代码发送到客户端，然后把 html 和 js 都传给客户端（html 的内容就能直接呈现，但是不能交互），客户端端通过水合让页面交互，也就是客户端重新初始化一遍 React 组件
