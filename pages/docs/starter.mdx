## React-PC-Starter

> vscode Èáå‰∏ãÂ•ΩÊèí‰ª∂ÔºöeslintÔºåprettierÔºåstylelintÔºåeditorConfigÔºåvite

#### ÂàùÂßãÂåñÈ°πÁõÆ

- ÂÆòÁΩëÊ®°ÁâàÂàõÂª∫È°πÁõÆÔºö`pnpm create vite react-h5-starter --template react-swc-ts`

- ÂÆâË£Ö‰æùËµñÔºö`pnpm i`

- ÂêéÈù¢ÊúâÂèØËÉΩÈÅáÂà∞ ts Á±ªÂûãÈîôËØØÔºåÂèØ‰ª•ÊèêÂâçÂÆâË£Ö‰∏Ä‰∏™`pnpm i @types/node -D`

#### ÈÖçÁΩÆ npm

- ÈÖçÁΩÆ`npmrc`

  ```
  registry = "https://registry.npmmirror.com/"
  ```

- node ÁâàÊú¨ÈôêÂà∂

- package.json ‰∏≠ÈÖçÁΩÆ

  ```json
  "engines": {
    "node": ">=16.0.0"
  },
  ```

#### ÈÖçÁΩÆ eslint

> eslint ÈÄâÊã©Âè™Ê£ÄÊü•ÈîôËØØ‰∏çÂ§ÑÁêÜÈ£éÊ†ºÔºåËøôÊ†∑ eslint Â∞±‰∏ç‰ºöÂíå prettier ÂÜ≤Á™Å,eslint Â§ÑÁêÜ‰ª£Á†ÅËßÑËåÉ,prettier Â§ÑÁêÜ‰ª£Á†ÅÈ£éÊ†º
> react ÂÆòÁΩëÊúâÊèê‰æõ‰∏Ä‰∏™ hook ÁöÑ eslintÔºå‰∏çËøáÁî®Áî®Â§Ñ‰∏çÂ§ßÔºåÂ∞±‰∏ç‰ΩøÁî®‰∫Ü

- ÂÆâË£ÖÔºö`pnpm i eslint -D`

- ÁîüÊàêÈÖçÁΩÆÊñá‰ª∂Ôºö`eslint --init`

  ```json
  - To check syntax and find problems
  - JavaScript modules (import/export)
  - React
  - YES
  - Browser
  - JSON
  - Yes
  - pnpm
  ```

- ÈÖçÁΩÆ`eslintrc.json->rules`ÈáåÈÖçÁΩÆ‰∏çÁî®ÊâãÂä®ÂºïÂÖ• reactÔºåÂíåÈÖçÁΩÆÂèØ‰ª•‰ΩøÁî® any

  ```json
  "rules": {
    //‰∏çÁî®ÊâãÂä®ÂºïÂÖ•react
    "react/react-in-jsx-scope": "off",
    //‰ΩøÁî®any‰∏çÊä•Èîô
    "@typescript-eslint/no-explicit-any": "off",
    // Ë≠¶Âëäconsole
    "no-console": 1
  }
  ```

- ÈÖçÁΩÆ`.vscode>settings.json`ÔºåÈÖçÁΩÆÂêé vscode ‰øùÂ≠òÊó∂Ëá™Âä®Ê†ºÂºèÂåñ‰ª£Á†ÅÈ£éÊ†º

  ÊØîÂ¶ÇÂÜô‰∫Ü‰∏Ä‰∏™ var a = 100,‰ºöË¢´Ëá™Âä®Ê†ºÂºèÂåñ‰∏∫ const a = 100

  ```json
  {
    "editor.codeActionsOnSave": {
      // ÊØèÊ¨°‰øùÂ≠òÁöÑÊó∂ÂÄôÂ∞Ü‰ª£Á†ÅÊåâÁÖß eslint Ê†ºÂºèËøõË°å‰øÆÂ§ç
      "source.fixAll.eslint": true
    }
  }
  ```

- ÈÖçÁΩÆ`.eslintignore`Ôºåeslint ‰ºöËá™Âä®ËøáÊª§ node_modules

  ```json
  dist
  ```

- ÊéåÊè°`eslintÊ†ºÂºèÂåñÂëΩ‰ª§`ÔºåÂêéÈù¢‰ΩøÁî® lint-staged Êèê‰∫§‰ª£Á†ÅÁöÑÊó∂ÂÄôÈúÄË¶ÅÈÖçÁΩÆ

  ‰∏∫‰ªÄ‰πà‰∏äÈù¢Êúâ vscode Ëá™Âä® eslint Ê†ºÂºèÂåñÔºåËøòÈúÄË¶ÅÂëΩ‰ª§Ë°å: Âõ†‰∏∫ÂëΩ‰ª§Ë°åËÉΩ‰∏ÄÊ¨°ÊÄßÁàÜÂá∫ÊâÄÊúâË≠¶ÂëäÈóÆÈ¢òÔºå‰æø‰∫éÊâæÂà∞‰ΩçÁΩÆ‰øÆÂ§ç

  ```js
  npx eslint . --fix//Áî®npxÊòØ‰ΩøÁî®È°πÁõÆÈáåÁöÑeslintÔºå‰∏ç‰ΩøÁî®npxÊòØÊú¨Âú∞npm i eslint -g‰∏ãËΩΩÁöÑÂÖ®Â±Äeslint
  eslint . --fix //ÂÖ®ÈÉ®Á±ªÂûãÊñá‰ª∂
  eslint . --ext .ts,.tsx --fix //--extÂèØ‰ª•ÊåáÂÆöÊñá‰ª∂ÂêéÁºÄÂêçs
  ```

  eslintrc.json ÈáåÈÖçÁΩÆ

- ```js
  "env": {
    "browser": true,
    "es2021": true,
    "node": true//eslintÈáåÊñ∞Â¢û
  },
  ```

#### ÈÖçÁΩÆ prettier

> prettier Ê†ºÂºèÂåñÈ£éÊ†º

- ÂÆâË£ÖÔºö`pnpm i prettier -D`

- ÈÖçÁΩÆ`.prettierrc.json`

  Ê≥®ÈáäË¶ÅÂà†ÊéâÔºåprettier ÁöÑÈÖçÁΩÆÊñá‰ª∂ json ‰∏çÊîØÊåÅÊ≥®Èáä

  ```json
  {
    "singleQuote": true, // ÂçïÂºïÂè∑
    "semi": false, // ÂàÜÂè∑
    "trailingComma": "none", // Â∞æÈöèÈÄóÂè∑
    "tabWidth": 2 // ‰∏§‰∏™Á©∫Ê†ºÁº©Ëøõ
  }
  ```

- ÈÖçÁΩÆ`.prettierignore`

  ```
  dist
  pnpm-lock.yaml
  ```

- ÈÖçÁΩÆ`.vscode>settings.json`ÔºåÈÖçÁΩÆÂêé vscode ‰øùÂ≠òÊó∂Ëá™Âä®Ê†ºÂºèÂåñ‰ª£Á†ÅÈ£éÊ†º

  ```json
  {
    "editor.codeActionsOnSave": {
      // ÊØèÊ¨°‰øùÂ≠òÁöÑÊó∂ÂÄôÂ∞Ü‰ª£Á†ÅÊåâÁÖß eslint Ê†ºÂºèËøõË°å‰øÆÂ§ç
      "source.fixAll.eslint": true
    },
    //Ëá™Âä®Ê†ºÂºèÂåñ
    "editor.formatOnSave": true,
    //È£éÊ†ºÁî®prettier
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  }
  ```

- ÊéåÊè°`prettierÂëΩ‰ª§Ë°å`

  ÂèØ‰ª•ËÆ©‰πãÂâçÊ≤°ÊúâÊ†ºÂºèÂåñÁöÑÈîôËØØ‰∏ÄÊ¨°ÊÄßÊö¥Èú≤Âá∫Êù•

  ```js
  npx prettier --write .//‰ΩøÁî®PrettierÊ†ºÂºèÂåñÊâÄÊúâÊñá‰ª∂
  ```

#### ÈÖçÁΩÆ editorConfig

> editorConfigÔºåÂèØ‰ª•ÂêåÊ≠•ÁºñËæëÂô®Â∑ÆÂºÇÔºåÂÖ∂ÂÆûÂ§ßÈÉ®ÂàÜÂ∑•‰Ωú prettier ÂÅö‰∫Ü

- ÈÖçÁΩÆ`editorconfig`

  ```
  #‰∏çÂÜçÂêë‰∏äÊü•Êâæ.editorconfig
  root = true
  # *Ë°®Á§∫ÂÖ®ÈÉ®Êñá‰ª∂
  [*]
  #ÁºñÁ†Å
  charset = utf-8
  #Áº©ËøõÊñπÂºè
  indent_style = space
  #Áº©ËøõÁ©∫Ê†ºÊï∞
  indent_size = 2
  #Êç¢Ë°åÁ¨¶lf
  end_of_line = lf
  ```

#### ÈÖçÁΩÆ stylelint

> stylelint Â§ÑÁêÜ css Êõ¥‰∏ì‰∏ö

- ÂÆâË£ÖÔºö`pnpm i -D stylelint stylelint-config-standard`

- ÈÖçÁΩÆ`.stylelintrc.json`

  ```json
  {
    "extends": "stylelint-config-standard"
  }
  ```

- ÈÖçÁΩÆ`.vscode>settings.json`ÔºåÈÖçÁΩÆÂêé vscode ‰øùÂ≠òÊó∂Ëá™Âä®Ê†ºÂºèÂåñ css

  ```json
  {
    "editor.codeActionsOnSave": {
      "source.fixAll.eslint": true, // ÊØèÊ¨°‰øùÂ≠òÁöÑÊó∂ÂÄôÂ∞Ü‰ª£Á†ÅÊåâÁÖß eslint Ê†ºÂºèËøõË°å‰øÆÂ§ç
      "source.fixAll.stylelint": true //Ëá™Âä®Ê†ºÂºèÂåñstylelint
    },
    "editor.formatOnSave": true, //Ëá™Âä®Ê†ºÂºèÂåñ
    "editor.defaultFormatter": "esbenp.prettier-vscode" //È£éÊ†ºÁî®prettier
  }
  ```

- ÊéåÊè°`stylelintÂëΩ‰ª§Ë°å`

  ```js
  npx stylelint "**/*.css" --fix//Ê†ºÂºèÂåñÊâÄÊúâcss,Ëá™Âä®‰øÆÂ§çcss
  ```

#### ÈÖçÁΩÆ husky

> ËÆ∞ÂæóË¶ÅÂàùÂßãÂåñ‰∏Ä‰∏™ git ‰ªìÂ∫ìÔºåhusky ËÉΩÊâßË°å git hookÔºåÂú® commit ÁöÑÊó∂ÂÄôÂØπÊñá‰ª∂ËøõË°åÊìç‰Ωú

- ÂÆâË£Ö

  `sudo pnpm dlx husky-init`

  ` pnpm install`

  `npx husky add .husky/commit-msg 'npx --no -- commitlint --edit "$1"'`Ôºåcommit-msg ‰ΩøÁî® commitlint

  `npx husky add .husky/pre-commit "npm run lint-staged"`Ôºåpre-commit ‰ΩøÁî® lint-staged

#### ÈÖçÁΩÆ commitlint

> Êèê‰∫§ËßÑËåÉÂèÇËÄÉÔºöhttps://www.conventionalcommits.org/en/v1.0.0/

- ÂÆâË£Ö`pnpm i @commitlint/cli @commitlint/config-conventional -D`

- ÈÖçÁΩÆ`.commitlintrc.json`

  ```
  { extends: ['@commitlint/config-conventional'] }
  ```

#### ÈÖçÁΩÆ lint-staged

- ÂÆâË£Ö`pnpm i -D lint-staged `

- ÈÖçÁΩÆ`package.json`

  ```json
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview",
    "prepare": "husky install",
    "lint-staged": "npx lint-staged"//Êñ∞Â¢ûÔºåÂØπÂ∫î‰∏äÈù¢ÁöÑhuskyÂëΩ‰ª§
  },
  ```

- ÈÖçÁΩÆ`.lintstagedrc.json`

  ```json
  {
    "*.{ts,tsx,json}": ["prettier --write", "eslint --fix"],
    "*.css": ["stylelint --fix", "prettier --write"]
  }
  ```

#### ÈÖçÁΩÆ viteÔºà‰ª£ÁêÜ/Âà´Âêç/drop console Á≠âÔºâ

- ‰∏Ä‰∫õÊñπ‰æøÂºÄÂèëÁöÑÈÖçÁΩÆ

  ```js
  import { defineConfig } from 'vite'
  import react from '@vitejs/plugin-react-swc'
  import path from 'path'

  // https://vitejs.dev/config/
  export default defineConfig({
    esbuild: {
      drop: ['console', 'debugger']
    },
    css: {
      // ÂºÄcss sourcemapÊñπ‰æøÊâæcss
      devSourcemap: true
    },
    plugins: [react()],
    server: {
      // Ëá™Âä®ÊâìÂºÄÊµèËßàÂô®
      open: trueÔºå
      proxy: {
        '/api': {
          target: 'https://xxxxxx',
          changeOrigin: true,
          rewrite: (path) => path.replace(/^\/api/, '')
        }
      }
    },
    resolve: {
      // ÈÖçÁΩÆÂà´Âêç
      alias: { '@': path.resolve(__dirname, './src') }
    },
    //ÊâìÂåÖË∑ØÂæÑÂèò‰∏∫Áõ∏ÂØπË∑ØÂæÑ,Áî®liveserverÊâìÂºÄ,‰æø‰∫éÊú¨Âú∞ÊµãËØïÊâìÂåÖÂêéÁöÑÊñá‰ª∂
    base: './'
  })
  ```

- ÈÖçÁΩÆÊâìÂåÖÂàÜÊûêÔºåÁî® legacy Â§ÑÁêÜÂÖºÂÆπÊÄß

  `pnpm i rollup-plugin-visualizer -D`

  `pnpm i @vitejs/plugin-legacy -D`ÔºåÂÆûÈôÖÈÅáÂà∞‰∫ÜÂÜçÁúãÂÆòÁΩëÁî®

  ```js
  import { defineConfig } from 'vite'
  import react from '@vitejs/plugin-react-swc'
  import { visualizer } from 'rollup-plugin-visualizer'
  import legacy from '@vitejs/plugin-legacy'
  import path from 'path'
  // https://vitejs.dev/config/
  export default defineConfig({
    css: {
      // ÂºÄcss sourcemapÊñπ‰æøÊâæcss
      devSourcemap: true
    },
    plugins: [
      react(),
      visualizer({
        open: false // ÊâìÂåÖÂÆåÊàêÂêéËá™Âä®ÊâìÂºÄÊµèËßàÂô®ÔºåÊòæÁ§∫‰∫ßÁâ©‰ΩìÁßØÊä•Âëä
      }),
      //ËÄÉËôëÂÖºÂÆπÊÄßÔºåÂÆûÈôÖÈÅáÂà∞‰∫ÜÂÜçÁúãÂÆòÁΩëÁî®
      legacy({
        targets: ['ie >= 11'],
        additionalLegacyPolyfills: ['regenerator-runtime/runtime']
      })
    ],
    server: {
      // Ëá™Âä®ÊâìÂºÄÊµèËßàÂô®
      open: true
    },
    resolve: {
      // ÈÖçÁΩÆÂà´Âêç
      alias: { '@': path.resolve(__dirname, './src') }
    },
    //ÊâìÂåÖË∑ØÂæÑÂèò‰∏∫Áõ∏ÂØπË∑ØÂæÑ,Áî®liveserverÊâìÂºÄ,‰æø‰∫éÊú¨Âú∞ÊµãËØïÊâìÂåÖÂêéÁöÑÊñá‰ª∂
    base: './'
  })
  ```

- Â¶ÇÊûúÊÉ≥ÊâãÊú∫‰∏äÁúãÁΩëÈ°µÔºåÂèØ‰ª•`pnpm dev --host`

- Â¶ÇÊûúÊÉ≥Âà†Èô§ consoleÔºåÂèØ‰ª•Êåâ`h`Âéª help Â∏ÆÂä©ÔºåÂÜçÊåâ`c`Â∞±ÂèØ‰ª• clear console

#### ÈÖçÁΩÆ tsconfig

- tsconfig.json ÈúÄË¶ÅÊîØÊåÅÂà´Âêç

  ```json
  {
    "compilerOptions": {
      "target": "ESNext",
      "useDefineForClassFields": true,
      "lib": ["DOM", "DOM.Iterable", "ESNext"],
      "allowJs": false,
      "skipLibCheck": true,
      "esModuleInterop": false,
      "allowSyntheticDefaultImports": true,
      "strict": true,
      "forceConsistentCasingInFileNames": true,
      "module": "ESNext",
      "moduleResolution": "Node",
      "resolveJsonModule": true,
      "isolatedModules": true,
      "noEmit": true,
      "jsx": "react-jsx",
      "baseUrl": "./",
      "paths": {
        "@/*": ["src/*"]
      }
    },
    "include": ["src"],
    "references": [{ "path": "./tsconfig.node.json" }]
  }
  ```

#### ÈÖçÁΩÆ router

- ÂÆâË£ÖÔºö`pnpm i react-router-dom`

- ÈÖçÁΩÆ`router->index.ts`

  ```js
  import { lazy } from 'react'
  import { createBrowserRouter } from 'react-router-dom'
  const Home = lazy(() => import('@/pages/home'))
  const router = createBrowserRouter([
    {
      path: '/',
      element: <Home></Home>
    }
  ])
  export default router
  ```

- ÈÖçÁΩÆ`main.tsx`

  ```tsx
  import { RouterProvider } from 'react-router-dom'
  import ReactDOM from 'react-dom/client'
  import './global.css'
  import router from './router'

  ReactDOM.createRoot(document.getElementById('root') as HTMLElement).render(
    <RouterProvider router={router} />
  )
  ```

#### ÈÖçÁΩÆ mobx

- ÂÆâË£Ö`pnpm i mobx mobx-react-lite`

- ÈÖçÁΩÆ`model->index.ts`

  ```js
  import { makeAutoObservable } from 'mobx'

  const store = makeAutoObservable({
    count: 1,
    setCount: (count: number) => {
      store.count = count
    }
  })

  export default store
  ```

- ‰ΩøÁî®ÊñπÊ≥ï‰∏æ‰∏™ üå∞

  ```tsx
  import store from '@/model'
  import { Button } from 'antd'
  import { observer, useLocalObservable } from 'mobx-react-lite'
  const Home: React.FC = () => {
    const localStore = useLocalObservable(() => store)
    return (
      <div>
        <Button>Antd</Button>
        <h1>{localStore.count}</h1>
      </div>
    )
  }

  export default observer(Home)
  ```

#### Â¶ÇÊûúÁî® zustand

- ÂÆâË£Ö`pnpm i zustand `

- store->index.ts

  ```js
  import { create } from 'zustand'

  interface appsState {
    nums: number
    setNumber: (nums: number) => void
  }

  const useAppsStore = create<appsState>((set) => ({
    nums: 0,
    setNumber: (num) => {
      return set(() => ({
        nums: num
      }))
    }
  }))

  export default useAppsStore
  ```

- ‰ΩøÁî®ÊñπÊ≥ï

  ```js
  import Button from '@/comps/custom-button'
  import useAppsStore from '@/store/app'
  const ZustandDemo: React.FC = () => {
    const { nums, setNumber } = useAppsStore()
    const handleNum = () => {
      setNumber(nums + 1)
    }
    return (
      <div className="p-10">
        <h1 className="my-10">Êï∞ÊçÆ/Êõ¥Êñ∞</h1>
        <Button click={handleNum}>ÁÇπÂáª‰∫ã‰ª∂</Button>
        <h1 className="py-10">{nums}</h1>
      </div>
    )
  }

  export default ZustandDemo
  ```

#### ÈÖçÁΩÆ antd

- Êñ∞ÁâàÊú¨ÁöÑ antdÔºåÁõ¥Êé•‰∏ãËΩΩÂ∞±ÂèØ‰ª•Áî®ÔºåÂ¶ÇÊûúÁî®Âà∞ÂÆÉÁöÑÂõæÁâáÂÜçÂçïÁã¨‰∏ãËΩΩ`pnpm i antd`
- Ê≥®ÊÑè antd5 ÁâàÊú¨ÁöÑ css ÂÖºÂÆπÊÄß‰∏çÂ•ΩÔºåÂ¶ÇÊûúÈ°πÁõÆÊúâÂÖºÂÆπÊÄßË¶ÅÊ±ÇÔºåÈúÄË¶ÅÂéªÂçïÁã¨ÈÖçÁΩÆ

#### ÈÖçÁΩÆ Tailwind css

`pnpm i tailwindcss autoprefixer postcss `

tailwind.config.cjs

```js
// ÊâìÂåÖÂêé‰ºöÊúâ1kbÁöÑcssÁî®‰∏çÂà∞ÁöÑÔºåÊ≤°ÊúâÂΩ±Âìç
// Áî®‰∫ÜantdÁªÑ‰ª∂ÂÖ≥Á≥ª‰πü‰∏çÂ§ßÔºåantd5ÁöÑÊ†∑ÂºèÊòØÊåâÈúÄÁöÑ
/** @type {import('tailwindcss').Config} */
module.exports = {
  darkMode: 'class',
  content: ['./index.html', './src/**/*.{js,ts,jsx,tsx}'],
  theme: {
    extend: {
      // colors: {
      //   themeColor: '#ff4132',
      //   textColor: '#1a1a1a'
      // },
      // Â¶ÇÊûúÂÜôËá™ÈÄÇÂ∫îÂ∏ÉÂ±ÄÔºåÂèØ‰ª•ÊåáÂÆöËÆæËÆ°Á®ø‰∏∫1000px,ÁÑ∂ÂêéÂè™ÈúÄË¶ÅÂÜô/10ÁöÑÊï∞ÂÄº
      // fontSize: {
      //   xs: '3.3vw',
      //   sm: '3.9vw'
      // }
    }
  },
  plugins: []
}
```

postcss.config.cjs

```js
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {}
  }
}
```

ÊàëÂñúÊ¨¢Êñ∞Âª∫‰∏Ä‰∏™ apply.css ÂºïÂÖ•Âà∞ÂÖ®Â±Ä

```css
@tailwind base;
@tailwind components;
@tailwind utilities;

.margin-center {
  @apply mx-auto my-0;
}

.flex-center {
  @apply flex justify-center items-center;
}

.absolute-center {
  @apply absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2;
}
```

#### Â∞ÅË£Ö fetch

```js
interface BaseOptions {
  method?: string
  credentials?: RequestCredentials
  strictErrors?: boolean
  headers?: HeadersInit
  body?: string | null
}

type HttpMethod = 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE' | 'HEAD'

interface ResponseObject {
  ok: boolean
  error: boolean
  status: number
  contentType: string | null
  bodyText: string
  response: Response
}

class FetchJson {
  private baseOptions: BaseOptions = {}

  constructor(options?: BaseOptions) {
    this.setBaseOptions(options || {})
  }

  public getBaseOptions(): BaseOptions {
    return this.baseOptions
  }

  public setBaseOptions(options: BaseOptions): BaseOptions {
    this.baseOptions = options
    return this.baseOptions
  }

  public request<T>(
    method: HttpMethod,
    url: string,
    data?: T,
    options?: BaseOptions
  ): Promise<ResponseObject> {
    const defaults: BaseOptions = {
      method,
      credentials: 'same-origin',
      strictErrors: false
    }

    const settings: BaseOptions = Object.assign(
      {},
      defaults,
      this.baseOptions,
      options
    )

    if (!settings.method || typeof settings.method !== 'string')
      throw Error('[fetch-json] HTTP method missing or invalid.')

    if (typeof url !== 'string')
      throw Error('[fetch-json] URL must be a string.')

    const httpMethod = settings.method.trim().toUpperCase()
    const isGetRequest = httpMethod === 'GET'

    type JSONHeader = {
      Accept: string
      'Content-Type': string
    }

    const jsonHeaders: Partial<JSONHeader> = { Accept: 'application/json' }

    if (!isGetRequest && data) jsonHeaders['Content-Type'] = 'application/json'

    settings.headers = Object.assign({}, jsonHeaders, settings.headers)

    const paramKeys = isGetRequest && data ? Object.keys(data) : []

    const getValue = (key: keyof T) => (data ? data[key] : '')

    const toPair = (key: string) =>
      key + '=' + encodeURIComponent(getValue(key as keyof T) as string)

    const params = () => paramKeys.map(toPair).join('&')

    const requestUrl = !paramKeys.length
      ? url
      : url + (url.includes('?') ? '&' : '?') + params()

    settings.body = !isGetRequest && data ? JSON.stringify(data) : null

    const toJson = (value: Response): Promise<ResponseObject> => {
      const response = value

      const contentType = response.headers.get('content-type')
      const isHead = httpMethod === 'HEAD'
      const isJson = !!contentType && /json|javascript/.test(contentType)
      const headersObj = () => Object.fromEntries(response.headers.entries())

      const textToObj = (httpBody: string): ResponseObject => ({
        ok: response.ok,
        error: !response.ok,
        status: response.status,
        contentType: contentType,
        bodyText: httpBody,
        response: response
      })

      const errToObj = (error: Error): ResponseObject => ({
        ok: false,
        error: true,
        status: 500,
        contentType: contentType,
        bodyText: 'Invalid JSON [' + error.toString() + ']',
        response: response
      })

      if (settings.strictErrors && !response.ok)
        throw Error(
          '[fetch-json] HTTP response status ("strictErrors" mode enabled): ' +
            response.status
        )

      return isHead
        ? response.text().then(headersObj)
        : isJson
        ? response.json().catch(errToObj)
        : response.text().then(textToObj)
    }

    const settingsRequestInit: RequestInit = JSON.parse(
      JSON.stringify(settings)
    )
    return fetch(requestUrl, settingsRequestInit).then(toJson)
  }

  public get<T>(
    url: string,
    params?: T,
    options?: BaseOptions
  ): Promise<ResponseObject> {
    return this.request<T>('GET', url, params, options)
  }

  public post<T>(
    url: string,
    resource: T,
    options?: BaseOptions
  ): Promise<ResponseObject> {
    return this.request<T>('POST', url, resource, options)
  }

  public put<T>(
    url: string,
    resource: T,
    options?: BaseOptions
  ): Promise<ResponseObject> {
    return this.request<T>('PUT', url, resource, options)
  }

  public patch<T>(
    url: string,
    resource: T,
    options?: BaseOptions
  ): Promise<ResponseObject> {
    return this.request<T>('PATCH', url, resource, options)
  }

  public delete<T>(
    url: string,
    resource: T,
    options?: BaseOptions
  ): Promise<ResponseObject> {
    return this.request<T>('DELETE', url, resource, options)
  }
}

const fetchJson = new FetchJson()
export { fetchJson, FetchJson }

```

#### Â¶ÇÊûúÁî® axios

request.ts

```ts
import axios from 'axios'
import { AxiosInstance } from 'axios'
import { errorHandle, processData, successHandle } from './resInterceptions'
import { defaultRequestInterception } from './reqInterceptions'
const TIMEOUT = 5 * 1000

class Request {
  instance: AxiosInstance
  constructor() {
    this.instance = axios.create()
    this.init()
  }

  private init() {
    this.setDefaultConfig()
    this.reqInterceptions()
    this.resInterceptions()
  }
  private setDefaultConfig() {
    this.instance.defaults.baseURL = import.meta.env.VITE_BASE_URL
    this.instance.defaults.timeout = TIMEOUT
  }
  private reqInterceptions() {
    this.instance.interceptors.request.use(defaultRequestInterception)
  }
  private resInterceptions() {
    this.instance.interceptors.response.use(processData)
    this.instance.interceptors.response.use(successHandle, errorHandle)
  }
}

export default new Request().instance
```

reqInterceptions.ts

```ts
import type { InternalAxiosRequestConfig } from 'axios'

const defaultRequestInterception = (config: InternalAxiosRequestConfig) => {
  // TODO: ÂÖ®Â±ÄËØ∑Ê±ÇÊã¶Êà™Âô®: Ê∑ªÂä†token
  return config
}

export { defaultRequestInterception }
```

resInterceptions.ts

```tsx
import { AxiosError, AxiosResponse } from 'axios'
import { checkStatus } from './checkStatus'

const processData = (res: AxiosResponse) => {
  // TODO:Áªü‰∏ÄÂ§ÑÁêÜÊï∞ÊçÆÁªìÊûÑ
  return res.data
}

const successHandle = (res: AxiosResponse) => {
  // TODO:Â§ÑÁêÜ‰∏Ä‰∫õÊàêÂäüÂõûË∞ÉÔºå‰æãÂ¶ÇËØ∑Ê±ÇËøõÂ∫¶Êù°
  return res.data
}

const errorHandle = (err: AxiosError) => {
  if (err.status) checkStatus(err.status)
  else return Promise.reject(err)
}

export { processData, successHandle, errorHandle }
```

checkStatus.ts

```ts
export function checkStatus(status: number, msg?: string): void {
  let errMessage = ''

  switch (status) {
    case 400:
      errMessage = `${msg}`
      break
    case 401:
      break
    case 403:
      errMessage = ''
      break
    // 404ËØ∑Ê±Ç‰∏çÂ≠òÂú®
    case 404:
      errMessage = ''
      break
    case 405:
      errMessage = ''
      break
    case 408:
      errMessage = ''
      break
    case 500:
      errMessage = ''
      break
    case 501:
      errMessage = ''
      break
    case 502:
      errMessage = ''
      break
    case 503:
      errMessage = ''
      break
    case 504:
      errMessage = ''
      break
    case 505:
      errMessage = ''
      break
    default:
  }
  if (errMessage) {
    // TODO:ÈîôËØØÊèêÁ§∫
    // createErrorModal({title: errMessage})
  }
}
```

api.ts

```ts
import request from '@/services/axios/request'
import { ReqTitle } from './type'

export const requestTitle = (): Promise<ReqTitle> => {
  return request.get('/api/‰∏Ä‰∏™Ëé∑ÂèñtitleÁöÑÊé•Âè£')
}
```

type.ts

```ts
export type ReqTitle = {
  title: string
}
```

#### ÈÖçÁΩÆ changelog

`pnpm i conventional-changelog-cli -D`

ÊâßË°åÔºö`conventional-changelog -p angular -i CHANGELOG.md -s`

#### ‰∏ãÈù¢ÊòØ h5 È°πÁõÆ

> h5 È°πÁõÆÈúÄË¶ÅÈÖçÁΩÆËá™ÈÄÇÂ∫îÂ∏ÉÂ±Ä

#### ÈÖçÁΩÆ postcss-px-to-viewportÔºàÂ∫üÂºÉ„ÄÅËá™ÈÄÇÂ∫îÂ∏ÉÂ±ÄÂÖ∂ÂÆû‰∏çÁî®Êèí‰ª∂Ôºâ

- ÊääËìùÊπñËÆæËÆ°Á®øÂ∞∫ÂØ∏Âõ∫ÂÆö‰∏∫ 1000pxÔºåÁÑ∂Âêé‰Ω†ÁÇπÂá∫Êù•ÁöÑÂÄºÊØîÂ¶ÇÊòØ 77pxÔºåÈÇ£‰Ω†Âè™ÈúÄË¶ÅÂÜô 7.7vw Â∞±ÂÆûÁé∞‰∫ÜËá™ÈÄÇÂ∫î

- ÂÆâË£ÖÔºö`pnpm i postcss-px-to-viewport -D`

- ÈÖçÁΩÆ`postcss.config.cjs`

  ```js
  module.exports = {
    plugins: {
      'postcss-px-to-viewport': {
        landscape: false, // ÊòØÂê¶Ê∑ªÂä†Ê†πÊçÆ landscapeWidth ÁîüÊàêÁöÑÂ™í‰ΩìÊü•ËØ¢Êù°‰ª∂ @media (orientation: landscape)
        landscapeUnit: 'vw', // Ê®™Â±èÊó∂‰ΩøÁî®ÁöÑÂçï‰Ωç
        landscapeWidth: 568, // Ê®™Â±èÊó∂‰ΩøÁî®ÁöÑËßÜÂè£ÂÆΩÂ∫¶
        unitToConvert: 'px', // Ë¶ÅËΩ¨ÂåñÁöÑÂçï‰Ωç
        viewportWidth: 750, // UIËÆæËÆ°Á®øÁöÑÂÆΩÂ∫¶
        unitPrecision: 5, // ËΩ¨Êç¢ÂêéÁöÑÁ≤æÂ∫¶ÔºåÂç≥Â∞èÊï∞ÁÇπ‰ΩçÊï∞
        propList: ['*'], // ÊåáÂÆöËΩ¨Êç¢ÁöÑcssÂ±ûÊÄßÁöÑÂçï‰ΩçÔºå*‰ª£Ë°®ÂÖ®ÈÉ®cssÂ±ûÊÄßÁöÑÂçï‰ΩçÈÉΩËøõË°åËΩ¨Êç¢
        viewportUnit: 'vw', // ÊåáÂÆöÈúÄË¶ÅËΩ¨Êç¢ÊàêÁöÑËßÜÁ™óÂçï‰ΩçÔºåÈªòËÆ§vw
        fontViewportUnit: 'vw', // ÊåáÂÆöÂ≠ó‰ΩìÈúÄË¶ÅËΩ¨Êç¢ÊàêÁöÑËßÜÁ™óÂçï‰ΩçÔºåÈªòËÆ§vw
        selectorBlackList: ['special'], // ÊåáÂÆö‰∏çËΩ¨Êç¢‰∏∫ËßÜÁ™óÂçï‰ΩçÁöÑÁ±ªÂêçÔºå
        minPixelValue: 1, // ÈªòËÆ§ÂÄº1ÔºåÂ∞è‰∫éÊàñÁ≠â‰∫é1pxÂàô‰∏çËøõË°åËΩ¨Êç¢
        mediaQuery: true, // ÊòØÂê¶Âú®Â™í‰ΩìÊü•ËØ¢ÁöÑcss‰ª£Á†Å‰∏≠‰πüËøõË°åËΩ¨Êç¢ÔºåÈªòËÆ§false
        replace: true, // ÊòØÂê¶ËΩ¨Êç¢ÂêéÁõ¥Êé•Êõ¥Êç¢Â±ûÊÄßÂÄº
        exclude: [/node_modules/] // ËÆæÁΩÆÂøΩÁï•Êñá‰ª∂ÔºåÁî®Ê≠£ÂàôÂÅöÁõÆÂΩïÂêçÂåπÈÖç
      }
    }
  }
  ```

#### ÈÖçÁΩÆ`vconsole`

- ÂÆâË£Ö`pnpm i vconsole -D`

- `main.tsx`ÈáåÊñ∞Â¢û

  ```tsx
  import VConsole from 'vconsole'
  new VConsole({ theme: 'dark' })
  ```

#### antd Êç¢Êàê mobile antd

- `pnpm remove antd`
- `pnpm add mobile-antd`
