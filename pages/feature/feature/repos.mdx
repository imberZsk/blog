## Swiper

- [API 文档](https://www.swiper.com.cn/api/index.html)
- [React 中使用 Swiper](https://swiperjs.com/react)
- [Vue 中使用 Swiper](https://swiperjs.com/vue)

```jsx
import { useState } from 'react'
import { Swiper, SwiperSlide } from 'swiper/react'
import { Pagination, Autoplay } from 'swiper'
import 'swiper/css'
import 'swiper/css/pagination'
const Slider: React.FC = () => {
  const swiperRef = useRef(null)
  const [cur, setCur] = useState(0) //控制轮播图小圆点
  return (
    <Swiper
      // 根据容器能显示多少个,可以auto，苹果官网就是auto效果
      slidesPerView={2}
      // 间距为16px
      spaceBetween={16}
      // 注入模块
      modules={[Pagination, Autoplay]}
      // 居中显示
      centeredSlides={true}
      // 在loop 模式下使用 slidesPerview:'auto' ，还需使用该参数设置所要用到的loop 个数(一般设置大于可视slide个数2个即可)
      loopedSlides={data?.length + 2}
      // 无限循环
      loop={true}
      // 变换的速度
      speed={1000}
      // 初次展示第几个slide
      // initialSlide={5}
      // 自动轮博的速度
      autoplay={{
        disableOnInteraction: false, //需要加上这个属性，点击轮播图后仍可以轮播
        delay: 3000
      }}
      // 获取实例
      onSwiper={(swiper) => (swiperRef.current = swiper)}
      onSlideChange={(swiper) => {
        setCur(swiper.realIndex)
      }}
    >
      {data?.map((item, index) => {
        return <SwiperSlide key={index}>...</SwiperSlide>
      })}
      {/* 自定义小圆点 */}
      <ul className={styles.slider_control}>
        {data?.map((item, index) => {
          return (
            <li
              key={index}
              className={`${styles.slider_circle} ${
                cur === index ? styles.slider_circle_active : ''
              }`}
              onClick={() => {
                {
                  /* 点击后跳转对应位置 */
                }
                swiperRef.current.slideToLoop(index, 1000, false)
                setCur(swiperRef.current.realIndex)
              }}
            ></li>
          )
        })}
      </ul>
    </Swiper>
  )
}
export default Slider
```

## Video.js

> React：https://videojs.com/guides/react/
>
> Vue: https://videojs.com/guides/vue/

api

```jsx
src：指定视频文件的URL。
controls：添加默认的视频播放控制器。
autoplay：指定视频是否在页面加载时自动播放。
loop：指定视频是否应该循环播放。
muted：指定视频是否应该静音。
preload：指定视频是否应该在页面加载时预加载。
poster：指定视频播放前显示的图片的URL。
width：指定视频播放区域的宽度。
height：指定视频播放区域的高度。
playsinline：指定视频是否应该内联播放。
```

使用

```tsx
import React from 'react'
import videojs from 'video.js'
import 'video.js/dist/video-js.css'
interface Iplayer {
  autoplay: (value: any) => void
  src: (value: any) => void
  isDisposed: () => boolean
  dispose: VoidFunction
}
export const VideoJS = (props: { options: any; onReady: any }) => {
  const videoRef = React.useRef<HTMLDivElement>(null)
  const playerRef = React.useRef(null)
  const { options, onReady } = props

  React.useEffect(() => {
    // Make sure Video.js player is only initialized once
    if (!playerRef.current) {
      // The Video.js player needs to be _inside_ the component el for React 18 Strict Mode.
      const videoElement = document.createElement('video-js')

      videoElement.classList.add('vjs-big-play-centered')
      videoRef.current?.appendChild(videoElement)

      const player = ((playerRef.current as any) = videojs(
        videoElement,
        options,
        () => {
          videojs.log('player is ready')
          onReady && onReady(player)
        }
      ))

      // You could update an existing player in the `else` block here
      // on prop change, for example:
    } else {
      const player: Iplayer = playerRef.current

      player.autoplay(options.autoplay)
      player.src(options.sources)
    }
  }, [options, videoRef])

  // Dispose the Video.js player when the functional component unmounts
  React.useEffect(() => {
    const player: Iplayer = playerRef.current as any

    return () => {
      if (player && !player.isDisposed()) {
        player.dispose()
        playerRef.current = null
      }
    }
  }, [playerRef])

  return (
    <div data-vjs-player>
      <div ref={videoRef} />
    </div>
  )
}

export default VideoJS
```

组件

```tsx
import React from 'react'

// This imports the functional component from the previous sample.
import VideoJS from '@/components/video'

const Home = () => {
  const playerRef = React.useRef(null)

  const videoJsOptions = {
    autoplay: true,
    controls: true,
    responsive: true,
    fluid: true,
    sources: [
      {
        src: 'https://ssm.res.meizu.com/content/video/hd/2023_03_03_111423460_86641868233566.mp4',
        type: 'video/mp4'
      }
    ]
  }

  const handlePlayerReady = (player: null) => {
    playerRef.current = player
  }

  return (
    <>
      <div>Rest of app here</div>
      <VideoJS options={videoJsOptions} onReady={handlePlayerReady} />
      <div>Rest of app here</div>
    </>
  )
}
export default Home
```

## html2canvas

```js
import html2canvas from 'html2canvas'

html2canvas(document.querySelector('#coverpic') as HTMLElement, {
  //在线图片域名需要配置允许跨域访问
  //为了给图片配置crossorigin="anonymous"
  useCORS: true,//开启跨域配置
  allowTaint: true,//允许跨域图片
  backgroundColor: 'transparent'//背景色
}).then((canvas) => {
  const imgData = canvas.toDataURL('image/png', 1.0)//获取到的图片url
  setTargetImg(imgData)
})
```

## magic-grid

```jsx
const magicGrid = new MagicGrid({
  animate: false,
  useMin: true,
  useTransform: false,
  container: '#fall',
  static: true,
  gutter: getGutterSize(),
  maxColumns: 3
})
magicGrid.listen()
```
