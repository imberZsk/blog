## React-PC-Starter

> vscode é‡Œä¸‹å¥½æ’ä»¶ï¼šeslintï¼Œprettierï¼Œstylelintï¼ŒeditorConfigï¼Œvite

#### åˆå§‹åŒ–é¡¹ç›®

- å®˜ç½‘æ¨¡ç‰ˆåˆ›å»ºé¡¹ç›®ï¼š`pnpm create vite react-h5-starter --template react-swc-ts`

- å®‰è£…ä¾èµ–ï¼š`pnpm i`

#### é…ç½® npm

- é…ç½®`npmrc`

  ```
  registry = "https://registry.npmmirror.com/"
  ```

- node ç‰ˆæœ¬é™åˆ¶

#### é…ç½® eslint

> eslint é€‰æ‹©åªæ£€æŸ¥é”™è¯¯ä¸å¤„ç†é£æ ¼ï¼Œè¿™æ · eslint å°±ä¸ä¼šå’Œ prettier å†²çª,eslint å¤„ç†ä»£ç è§„èŒƒ,prettier å¤„ç†ä»£ç é£æ ¼

- å®‰è£…ï¼š`pnpm i eslint -D`

- ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼š`eslint --init`

  ```json
  - To check syntax and find problems
  - JavaScript modules (import/export)
  - React
  - YES
  - Browser
  - JSON
  - Yes
  - pnpm
  ```

- é…ç½®`eslintrc.json->rules`é‡Œé…ç½®ä¸ç”¨æ‰‹åŠ¨å¼•å…¥ reactï¼Œå’Œé…ç½®å¯ä»¥ä½¿ç”¨ any

  ```json
  "rules": {
    //ä¸ç”¨æ‰‹åŠ¨å¼•å…¥react
    "react/react-in-jsx-scope": "off",
    //ä½¿ç”¨anyä¸æŠ¥é”™
    "@typescript-eslint/no-explicit-any": "off",
    // è­¦å‘Šconsole
    "no-console": 1
  }
  ```

- é…ç½®`.vscode>settings.json`ï¼Œé…ç½®å vscode ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç é£æ ¼

  æ¯”å¦‚å†™äº†ä¸€ä¸ª var a = 100,ä¼šè¢«è‡ªåŠ¨æ ¼å¼åŒ–ä¸º const a = 100

  ```json
  {
    "editor.codeActionsOnSave": {
      // æ¯æ¬¡ä¿å­˜çš„æ—¶å€™å°†ä»£ç æŒ‰ç…§ eslint æ ¼å¼è¿›è¡Œä¿®å¤
      "source.fixAll.eslint": true
    }
  }
  ```

- é…ç½®`.eslintignore`ï¼Œeslint ä¼šè‡ªåŠ¨è¿‡æ»¤ node_modules

  ```json
  dist
  ```

- æŒæ¡`eslintæ ¼å¼åŒ–å‘½ä»¤`ï¼Œåé¢ä½¿ç”¨ lint-staged æäº¤ä»£ç çš„æ—¶å€™éœ€è¦é…ç½®

  ä¸ºä»€ä¹ˆä¸Šé¢æœ‰ vscode è‡ªåŠ¨ eslint æ ¼å¼åŒ–ï¼Œè¿˜éœ€è¦å‘½ä»¤è¡Œ: å› ä¸ºå‘½ä»¤è¡Œèƒ½ä¸€æ¬¡æ€§çˆ†å‡ºæ‰€æœ‰è­¦å‘Šé—®é¢˜ï¼Œä¾¿äºæ‰¾åˆ°ä½ç½®ä¿®å¤

  ```js
  npx eslint . --fix//ç”¨npxæ˜¯ä½¿ç”¨é¡¹ç›®é‡Œçš„eslintï¼Œä¸ä½¿ç”¨npxæ˜¯æœ¬åœ°npm i eslint -gä¸‹è½½çš„å…¨å±€eslint
  eslint . --fix //å…¨éƒ¨ç±»å‹æ–‡ä»¶
  eslint . --ext .ts,.tsx --fix //--extå¯ä»¥æŒ‡å®šæ–‡ä»¶åç¼€ås
  ```

#### é…ç½® prettier

> prettier æ ¼å¼åŒ–é£æ ¼

- å®‰è£…ï¼š`pnpm i prettier -D`

- é…ç½®`.prettierrc.json`

  æ³¨é‡Šè¦åˆ æ‰ï¼Œprettier çš„é…ç½®æ–‡ä»¶ json ä¸æ”¯æŒæ³¨é‡Š

  ```json
  {
    "singleQuote": true, // å•å¼•å·
    "semi": false, // åˆ†å·
    "trailingComma": "none", // å°¾éšé€—å·
    "tabWidth": 2 // ä¸¤ä¸ªç©ºæ ¼ç¼©è¿›
  }
  ```

- é…ç½®`.prettierignore`

  ```
  dist
  pnpm-lock.yaml
  ```

- é…ç½®`.vscode>settings.json`ï¼Œé…ç½®å vscode ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç é£æ ¼

  ```json
  {
    "editor.codeActionsOnSave": {
      // æ¯æ¬¡ä¿å­˜çš„æ—¶å€™å°†ä»£ç æŒ‰ç…§ eslint æ ¼å¼è¿›è¡Œä¿®å¤
      "source.fixAll.eslint": true
    },
    //è‡ªåŠ¨æ ¼å¼åŒ–
    "editor.formatOnSave": true,
    //é£æ ¼ç”¨prettier
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  }
  ```

- æŒæ¡`prettierå‘½ä»¤è¡Œ`

  å¯ä»¥è®©ä¹‹å‰æ²¡æœ‰æ ¼å¼åŒ–çš„é”™è¯¯ä¸€æ¬¡æ€§æš´éœ²å‡ºæ¥

  ```js
  npx prettier --write .//ä½¿ç”¨Prettieræ ¼å¼åŒ–æ‰€æœ‰æ–‡ä»¶
  ```

#### é…ç½® editorConfig

> editorConfigï¼Œå¯ä»¥åŒæ­¥ç¼–è¾‘å™¨å·®å¼‚ï¼Œå…¶å®å¤§éƒ¨åˆ†å·¥ä½œ prettier åšäº†

- é…ç½®`editorconfig`

  ```
  #ä¸å†å‘ä¸ŠæŸ¥æ‰¾.editorconfig
  root = true
  # *è¡¨ç¤ºå…¨éƒ¨æ–‡ä»¶
  [*]
  #ç¼–ç 
  charset = utf-8
  #ç¼©è¿›æ–¹å¼
  indent_style = space
  #ç¼©è¿›ç©ºæ ¼æ•°
  indent_size = 2
  #æ¢è¡Œç¬¦lf
  end_of_line = lf
  ```

#### é…ç½® stylelint

> stylelint å¤„ç† css æ›´ä¸“ä¸š

- å®‰è£…ï¼š`pnpm i -D stylelint stylelint-config-standard`

- é…ç½®`.stylelintrc.json`

  ```json
  {
    "extends": "stylelint-config-standard"
  }
  ```

- é…ç½®`.vscode>settings.json`ï¼Œé…ç½®å vscode ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ– css

  ```json
  {
    "editor.codeActionsOnSave": {
      "source.fixAll.eslint": true, // æ¯æ¬¡ä¿å­˜çš„æ—¶å€™å°†ä»£ç æŒ‰ç…§ eslint æ ¼å¼è¿›è¡Œä¿®å¤
      "source.fixAll.stylelint": true //è‡ªåŠ¨æ ¼å¼åŒ–stylelint
    },
    "editor.formatOnSave": true, //è‡ªåŠ¨æ ¼å¼åŒ–
    "editor.defaultFormatter": "esbenp.prettier-vscode" //é£æ ¼ç”¨prettier
  }
  ```

- æŒæ¡`stylelintå‘½ä»¤è¡Œ`

  ```js
  npx stylelint "**/*.css" --fix//æ ¼å¼åŒ–æ‰€æœ‰css,è‡ªåŠ¨ä¿®å¤css
  ```

#### é…ç½® husky

> è®°å¾—è¦åˆå§‹åŒ–ä¸€ä¸ª git ä»“åº“ï¼Œhusky èƒ½æ‰§è¡Œ git hookï¼Œåœ¨ commit çš„æ—¶å€™å¯¹æ–‡ä»¶è¿›è¡Œæ“ä½œ
>
> 

- å®‰è£…

  `sudo pnpm dlx husky-init`

  ` pnpm install`

  `npx husky add .husky/commit-msg 'npx --no -- commitlint --edit "$1"'`ï¼Œcommit-msgä½¿ç”¨commitlint
  
  `npx husky add .husky/pre-commit "npm run lint-staged"`ï¼Œpre-commitä½¿ç”¨lint-staged

#### é…ç½® commitlint

> æäº¤è§„èŒƒå‚è€ƒï¼šhttps://www.conventionalcommits.org/en/v1.0.0/

- å®‰è£…`pnpm i @commitlint/cli @commitlint/config-conventional -D`

- é…ç½®`.commitlintrc.json`

  ```
  { extends: ['@commitlint/config-conventional'] }
  ```

#### é…ç½® lint-staged

- å®‰è£…`pnpm i -D lint-staged `

- é…ç½®`package.json`

  ```json
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview",
    "prepare": "husky install",
    "lint-staged": "npx lint-staged"//æ–°å¢ï¼Œå¯¹åº”ä¸Šé¢çš„huskyå‘½ä»¤
  },
  ```

- é…ç½®`.lintstagedrc.json`

  ```json
  {
    "*.{ts,tsx,json}": ["prettier --write", "eslint --fix"],
    "*.css": ["stylelint --fix", "prettier --write"]
  }
  ```

#### é…ç½® vite

- ä¸€äº›æ–¹ä¾¿å¼€å‘çš„é…ç½®

  ```js
  import { defineConfig } from 'vite'
  import react from '@vitejs/plugin-react-swc'
  import path from 'path'
  
  // https://vitejs.dev/config/
  export default defineConfig({
    css: {
      // å¼€css sourcemapæ–¹ä¾¿æ‰¾css
      devSourcemap: true
    },
    plugins: [react()],
    server: {
      // è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
      open: true
    },
    resolve: {
      // é…ç½®åˆ«å
      alias: { '@': path.resolve(__dirname, './src') }
    },
    //æ‰“åŒ…è·¯å¾„å˜ä¸ºç›¸å¯¹è·¯å¾„,ç”¨liveserveræ‰“å¼€,ä¾¿äºæœ¬åœ°æµ‹è¯•æ‰“åŒ…åçš„æ–‡ä»¶
    base: './'
  })
  ```

- é…ç½®æ‰“åŒ…åˆ†æï¼Œç”¨legacyå¤„ç†å…¼å®¹æ€§

  `pnpm i rollup-plugin-visualizer -D`

  `pnpm i @vitejs/plugin-legacy -D`ï¼Œå®é™…é‡åˆ°äº†å†çœ‹å®˜ç½‘ç”¨

  ```js
  import { defineConfig } from 'vite'
  import react from '@vitejs/plugin-react-swc'
  import { visualizer } from 'rollup-plugin-visualizer'
  import legacy from '@vitejs/plugin-legacy'
  import path from 'path'
  // https://vitejs.dev/config/
  export default defineConfig({
    css: {
      // å¼€css sourcemapæ–¹ä¾¿æ‰¾css
      devSourcemap: true
    },
    plugins: [
      react(),
      visualizer({
        open: false // æ‰“åŒ…å®Œæˆåè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œæ˜¾ç¤ºäº§ç‰©ä½“ç§¯æŠ¥å‘Š
      }),
    	//è€ƒè™‘å…¼å®¹æ€§ï¼Œå®é™…é‡åˆ°äº†å†çœ‹å®˜ç½‘ç”¨  
      legacy({
        targets: ['ie >= 11'],
        additionalLegacyPolyfills: ['regenerator-runtime/runtime']
      })
    ],
    server: {
      // è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
      open: true
    },
    resolve: {
      // é…ç½®åˆ«å
      alias: { '@': path.resolve(__dirname, './src') }
    },
    //æ‰“åŒ…è·¯å¾„å˜ä¸ºç›¸å¯¹è·¯å¾„,ç”¨liveserveræ‰“å¼€,ä¾¿äºæœ¬åœ°æµ‹è¯•æ‰“åŒ…åçš„æ–‡ä»¶
    base: './'
  })
  ```

- å¦‚æœæƒ³æ‰‹æœºä¸Šçœ‹ç½‘é¡µï¼Œå¯ä»¥`pnpm dev --host`

- å¦‚æœæƒ³åˆ é™¤consoleï¼Œå¯ä»¥æŒ‰`h`å»helpå¸®åŠ©ï¼Œå†æŒ‰`c`å°±å¯ä»¥clear console

#### é…ç½®tsconfig

- tsconfig.jsonéœ€è¦æ”¯æŒåˆ«å

  ```json
  {
    "compilerOptions": {
      "target": "ESNext",
      "useDefineForClassFields": true,
      "lib": ["DOM", "DOM.Iterable", "ESNext"],
      "allowJs": false,
      "skipLibCheck": true,
      "esModuleInterop": false,
      "allowSyntheticDefaultImports": true,
      "strict": true,
      "forceConsistentCasingInFileNames": true,
      "module": "ESNext",
      "moduleResolution": "Node",
      "resolveJsonModule": true,
      "isolatedModules": true,
      "noEmit": true,
      "jsx": "react-jsx",
      "baseUrl": "./",
      "paths": {
        "@/*": ["src/*"]
      }
    },
    "include": ["src"],
    "references": [{ "path": "./tsconfig.node.json" }]
  }
  ```

#### é…ç½® router

- å®‰è£…ï¼š`pnpm i react-router-dom`

- é…ç½®`router->index.ts`

  ```js
  import { lazy } from 'react'
  import { createBrowserRouter } from 'react-router-dom'
  const Home = lazy(() => import('@/pages/home'))
  const router = createBrowserRouter([
    {
      path: '/',
      element: <Home></Home>
    }
  ])
  export default router
  ```

- é…ç½®`main.tsx`

  ```tsx
  import { RouterProvider } from 'react-router-dom'
  import ReactDOM from 'react-dom/client'
  import './global.css'
  import router from './router'
  
  ReactDOM.createRoot(document.getElementById('root') as HTMLElement).render(
    <RouterProvider router={router} />
  )
  ```

#### é…ç½® mobx

- å®‰è£…`pnpm i mobx mobx-react-lite`

- é…ç½®`model->index.ts`

  ```js
  import { makeAutoObservable } from 'mobx'
  
  const store = makeAutoObservable({
    count: 1,
    setCount: (count: number) => {
      store.count = count
    }
  })
  
  export default store
  ```

- ä½¿ç”¨æ–¹æ³•ä¸¾ä¸ªğŸŒ°

  ```tsx
  import store from '@/model'
  import { Button } from 'antd'
  import { observer, useLocalObservable } from 'mobx-react-lite'
  const Home: React.FC = () => {
    const localStore = useLocalObservable(() => store)
    return (
      <div>
        <Button>Antd</Button>
        <h1>{localStore.count}</h1>
      </div>
    )
  }
  
  export default observer(Home)
  ```

#### é…ç½® antd

- æ–°ç‰ˆæœ¬çš„antdï¼Œç›´æ¥ä¸‹è½½å°±å¯ä»¥ç”¨ï¼Œå¦‚æœç”¨åˆ°å®ƒçš„å›¾ç‰‡å†å•ç‹¬ä¸‹è½½`pnpm i antd`

#### é…ç½®åˆå§‹åŒ–css

- æŠŠmian.tsxç”¨çš„index.cssæ”¹ä¸ºglobal.cssï¼Œç„¶åç®€å•é…ç½®ä¸‹

  ```css
  html {
    line-height: 1.6;
    height: 100%;
    width: 100%;
  }
  
  body {
    margin: 0;
    overflow: hidden;
    height: 100%;
    width: 100%;
  }
  
  a {
    background-color: transparent;
  }
  
  img {
    border-style: none;
  }
  
  ul {
    list-style-type: none;
    padding: 0;
  }
  
  input,
  button {
    outline: none;
  }
  ```


## React-H5-Starter

> h5é¡¹ç›®éœ€è¦é…ç½®è‡ªé€‚åº”å¸ƒå±€

#### é…ç½®postcss-px-to-viewport

- å®‰è£…ï¼š`pnpm i postcss-px-to-viewport -D`

- é…ç½®`postcss.config.cjs`

  ```json
  "env": {
    "browser": true,
    "es2021": true,
    "node": true//eslinté‡Œæ–°å¢
  },
  ```

  ```js
  module.exports = {
    plugins: {
      'postcss-px-to-viewport': {
        landscape: false, // æ˜¯å¦æ·»åŠ æ ¹æ® landscapeWidth ç”Ÿæˆçš„åª’ä½“æŸ¥è¯¢æ¡ä»¶ @media (orientation: landscape)
        landscapeUnit: 'vw', // æ¨ªå±æ—¶ä½¿ç”¨çš„å•ä½
        landscapeWidth: 568, // æ¨ªå±æ—¶ä½¿ç”¨çš„è§†å£å®½åº¦
        unitToConvert: 'px', // è¦è½¬åŒ–çš„å•ä½
        viewportWidth: 750, // UIè®¾è®¡ç¨¿çš„å®½åº¦
        unitPrecision: 5, // è½¬æ¢åçš„ç²¾åº¦ï¼Œå³å°æ•°ç‚¹ä½æ•°
        propList: ['*'], // æŒ‡å®šè½¬æ¢çš„csså±æ€§çš„å•ä½ï¼Œ*ä»£è¡¨å…¨éƒ¨csså±æ€§çš„å•ä½éƒ½è¿›è¡Œè½¬æ¢
        viewportUnit: 'vw', // æŒ‡å®šéœ€è¦è½¬æ¢æˆçš„è§†çª—å•ä½ï¼Œé»˜è®¤vw
        fontViewportUnit: 'vw', // æŒ‡å®šå­—ä½“éœ€è¦è½¬æ¢æˆçš„è§†çª—å•ä½ï¼Œé»˜è®¤vw
        selectorBlackList: ['special'], // æŒ‡å®šä¸è½¬æ¢ä¸ºè§†çª—å•ä½çš„ç±»åï¼Œ
        minPixelValue: 1, // é»˜è®¤å€¼1ï¼Œå°äºæˆ–ç­‰äº1pxåˆ™ä¸è¿›è¡Œè½¬æ¢
        mediaQuery: true, // æ˜¯å¦åœ¨åª’ä½“æŸ¥è¯¢çš„cssä»£ç ä¸­ä¹Ÿè¿›è¡Œè½¬æ¢ï¼Œé»˜è®¤false
        replace: true, // æ˜¯å¦è½¬æ¢åç›´æ¥æ›´æ¢å±æ€§å€¼
        exclude: [/node_modules/] // è®¾ç½®å¿½ç•¥æ–‡ä»¶ï¼Œç”¨æ­£åˆ™åšç›®å½•ååŒ¹é…
      }
    }
  }
  ```

#### é…ç½®`vconsole`

- å®‰è£…`pnpm i vconsole -D`

- `main.tsx`é‡Œæ–°å¢

  ```tsx
  import VConsole from 'vconsole'
  new VConsole({ theme: 'dark' })
  ```

#### antdæ¢æˆmobile antd

- `pnpm remove antd`
- `pnpm add mobile-antd`
